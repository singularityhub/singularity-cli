<!DOCTYPE html>
<html class="writer-html4" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>spython.utils package &mdash; Singularity Python API 1 documentation</title>
      <link rel="stylesheet" href="../assets/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../assets/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../assets/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../assets/documentation_options.js"></script>
        <script src="../assets/jquery.js"></script>
        <script src="../assets/underscore.js"></script>
        <script src="../assets/doctools.js"></script>
    <script src="../assets/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="&lt;no title&gt;" href="../changelog.html" />
    <link rel="prev" title="spython.main.parse package" href="spython.main.parse.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> Singularity Python API
          </a>
              <div class="version">
                0.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="spython.html">spython package</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="spython.html#subpackages">Subpackages</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="spython.client.html">spython.client package</a></li>
<li class="toctree-l3"><a class="reference internal" href="spython.image.html">spython.image package</a></li>
<li class="toctree-l3"><a class="reference internal" href="spython.instance.html">spython.instance package</a></li>
<li class="toctree-l3"><a class="reference internal" href="spython.logger.html">spython.logger package</a></li>
<li class="toctree-l3"><a class="reference internal" href="spython.main.html">spython.main package</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">spython.utils package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#submodules">Submodules</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-spython.utils.fileio">spython.utils.fileio module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-spython.utils.terminal">spython.utils.terminal module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-spython.utils">Module contents</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="spython.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="spython.html#module-spython.version">spython.version module</a></li>
<li class="toctree-l2"><a class="reference internal" href="spython.html#module-spython">Module contents</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Singularity Python API</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="spython.html">spython package</a> &raquo;</li>
      <li>spython.utils package</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/source/spython.utils.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="spython-utils-package">
<h1>spython.utils package<a class="headerlink" href="#spython-utils-package" title="Permalink to this headline"></a></h1>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline"></a></h2>
</div>
<div class="section" id="module-spython.utils.fileio">
<span id="spython-utils-fileio-module"></span><h2>spython.utils.fileio module<a class="headerlink" href="#module-spython.utils.fileio" title="Permalink to this headline"></a></h2>
<p># Copyright (C) 2017-2022 Vanessa Sochat.</p>
<p>This Source Code Form is subject to the terms of the
Mozilla Public License, v. 2.0. If a copy of the MPL was not distributed
with this file, You can obtain one at <a class="reference external" href="http://mozilla.org/MPL/2.0/">http://mozilla.org/MPL/2.0/</a>.</p>
<dl class="py function">
<dt class="sig sig-object py" id="spython.utils.fileio.mkdir_p">
<code class="sig-prename descclassname"><span class="pre">spython.utils.fileio.</span></code><code class="sig-name descname"><span class="pre">mkdir_p</span></code><span class="sig-paren">(</span><em><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../modules/spython/utils/fileio.html#mkdir_p"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spython.utils.fileio.mkdir_p" title="Permalink to this definition"></a></dt>
<dd><p>mkdir_p attempts to get the same functionality as mkdir -p
:param path: the path to create.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spython.utils.fileio.read_file">
<code class="sig-prename descclassname"><span class="pre">spython.utils.fileio.</span></code><code class="sig-name descname"><span class="pre">read_file</span></code><span class="sig-paren">(</span><em><span class="n"><span class="pre">filename</span></span></em>, <em><span class="n"><span class="pre">mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'r'</span></span></em>, <em><span class="n"><span class="pre">readlines</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../modules/spython/utils/fileio.html#read_file"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spython.utils.fileio.read_file" title="Permalink to this definition"></a></dt>
<dd><p>write_file will open a file, “filename” and write content, “content”
and properly close the file</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spython.utils.fileio.read_json">
<code class="sig-prename descclassname"><span class="pre">spython.utils.fileio.</span></code><code class="sig-name descname"><span class="pre">read_json</span></code><span class="sig-paren">(</span><em><span class="n"><span class="pre">filename</span></span></em>, <em><span class="n"><span class="pre">mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'r'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../modules/spython/utils/fileio.html#read_json"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spython.utils.fileio.read_json" title="Permalink to this definition"></a></dt>
<dd><p>read_json reads in a json file and returns
the data structure as dict.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spython.utils.fileio.write_file">
<code class="sig-prename descclassname"><span class="pre">spython.utils.fileio.</span></code><code class="sig-name descname"><span class="pre">write_file</span></code><span class="sig-paren">(</span><em><span class="n"><span class="pre">filename</span></span></em>, <em><span class="n"><span class="pre">content</span></span></em>, <em><span class="n"><span class="pre">mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'w'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../modules/spython/utils/fileio.html#write_file"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spython.utils.fileio.write_file" title="Permalink to this definition"></a></dt>
<dd><p>write_file will open a file, “filename” and write content, “content”
and properly close the file</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spython.utils.fileio.write_json">
<code class="sig-prename descclassname"><span class="pre">spython.utils.fileio.</span></code><code class="sig-name descname"><span class="pre">write_json</span></code><span class="sig-paren">(</span><em><span class="n"><span class="pre">json_obj</span></span></em>, <em><span class="n"><span class="pre">filename</span></span></em>, <em><span class="n"><span class="pre">mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'w'</span></span></em>, <em><span class="n"><span class="pre">print_pretty</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../modules/spython/utils/fileio.html#write_json"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spython.utils.fileio.write_json" title="Permalink to this definition"></a></dt>
<dd><p>write_json will (optionally,pretty print) a json object to file
:param json_obj: the dict to print to json
:param filename: the output file to write to
:param pretty_print: if True, will use nicer formatting</p>
</dd></dl>

</div>
<div class="section" id="module-spython.utils.terminal">
<span id="spython-utils-terminal-module"></span><h2>spython.utils.terminal module<a class="headerlink" href="#module-spython.utils.terminal" title="Permalink to this headline"></a></h2>
<p># Copyright (C) 2017-2022 Vanessa Sochat.</p>
<p>This Source Code Form is subject to the terms of the
Mozilla Public License, v. 2.0. If a copy of the MPL was not distributed
with this file, You can obtain one at <a class="reference external" href="http://mozilla.org/MPL/2.0/">http://mozilla.org/MPL/2.0/</a>.</p>
<dl class="py function">
<dt class="sig sig-object py" id="spython.utils.terminal.check_install">
<code class="sig-prename descclassname"><span class="pre">spython.utils.terminal.</span></code><code class="sig-name descname"><span class="pre">check_install</span></code><span class="sig-paren">(</span><em><span class="n"><span class="pre">software</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'singularity'</span></span></em>, <em><span class="n"><span class="pre">quiet</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../modules/spython/utils/terminal.html#check_install"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spython.utils.terminal.check_install" title="Permalink to this definition"></a></dt>
<dd><p>check_install will attempt to run the singularity command, and
return True if installed. The command line utils will not run
without this check.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spython.utils.terminal.format_container_name">
<code class="sig-prename descclassname"><span class="pre">spython.utils.terminal.</span></code><code class="sig-name descname"><span class="pre">format_container_name</span></code><span class="sig-paren">(</span><em><span class="n"><span class="pre">name</span></span></em>, <em><span class="n"><span class="pre">special_characters</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../modules/spython/utils/terminal.html#format_container_name"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spython.utils.terminal.format_container_name" title="Permalink to this definition"></a></dt>
<dd><p>format_container_name will take a name supplied by the user,
remove all special characters (except for those defined by “special-characters”
and return the new image name.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spython.utils.terminal.get_installdir">
<code class="sig-prename descclassname"><span class="pre">spython.utils.terminal.</span></code><code class="sig-name descname"><span class="pre">get_installdir</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../modules/spython/utils/terminal.html#get_installdir"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spython.utils.terminal.get_installdir" title="Permalink to this definition"></a></dt>
<dd><p>get_installdir returns the installation directory of the application</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spython.utils.terminal.get_singularity_version">
<code class="sig-prename descclassname"><span class="pre">spython.utils.terminal.</span></code><code class="sig-name descname"><span class="pre">get_singularity_version</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../modules/spython/utils/terminal.html#get_singularity_version"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spython.utils.terminal.get_singularity_version" title="Permalink to this definition"></a></dt>
<dd><p>get the full singularity client version as reported by
singularity –version […]. For Singularity 3.x, this means:
“singularity version 3.0.1-1”</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spython.utils.terminal.get_singularity_version_info">
<code class="sig-prename descclassname"><span class="pre">spython.utils.terminal.</span></code><code class="sig-name descname"><span class="pre">get_singularity_version_info</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../modules/spython/utils/terminal.html#get_singularity_version_info"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spython.utils.terminal.get_singularity_version_info" title="Permalink to this definition"></a></dt>
<dd><p>get the full singularity client version as a semantic version”</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spython.utils.terminal.get_userhome">
<code class="sig-prename descclassname"><span class="pre">spython.utils.terminal.</span></code><code class="sig-name descname"><span class="pre">get_userhome</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../modules/spython/utils/terminal.html#get_userhome"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spython.utils.terminal.get_userhome" title="Permalink to this definition"></a></dt>
<dd><p>get the user home based on the effective uid</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spython.utils.terminal.get_username">
<code class="sig-prename descclassname"><span class="pre">spython.utils.terminal.</span></code><code class="sig-name descname"><span class="pre">get_username</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../modules/spython/utils/terminal.html#get_username"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spython.utils.terminal.get_username" title="Permalink to this definition"></a></dt>
<dd><p>get the user name based on the effective uid</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spython.utils.terminal.remove_uri">
<code class="sig-prename descclassname"><span class="pre">spython.utils.terminal.</span></code><code class="sig-name descname"><span class="pre">remove_uri</span></code><span class="sig-paren">(</span><em><span class="n"><span class="pre">container</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../modules/spython/utils/terminal.html#remove_uri"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spython.utils.terminal.remove_uri" title="Permalink to this definition"></a></dt>
<dd><p>remove_uri will remove docker:// or shub:// or library:// from the uri</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spython.utils.terminal.run_command">
<code class="sig-prename descclassname"><span class="pre">spython.utils.terminal.</span></code><code class="sig-name descname"><span class="pre">run_command</span></code><span class="sig-paren">(</span><em><span class="n"><span class="pre">cmd</span></span></em>, <em><span class="n"><span class="pre">sudo</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em><span class="n"><span class="pre">capture</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em><span class="n"><span class="pre">no_newline_regexp</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Progess'</span></span></em>, <em><span class="n"><span class="pre">quiet</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em><span class="n"><span class="pre">sudo_options</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em><span class="n"><span class="pre">environ</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../modules/spython/utils/terminal.html#run_command"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spython.utils.terminal.run_command" title="Permalink to this definition"></a></dt>
<dd><p>run_command uses subprocess to send a command to the terminal. If
capture is True, we use the parent stdout, so the progress bar (and
other commands of interest) are piped to the user. This means we
don’t return the output to parse.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>cmd</strong> (<em>the command to send, should be a list for subprocess</em>)</li>
<li><strong>sudo</strong> (<em>if needed, add to start of command</em>)</li>
<li><strong>no_newline_regexp</strong> (<em>the regular expression to determine skipping a</em>) – newline. Defaults to finding Progress</li>
<li><strong>capture</strong> (<em>if True, don’t set stdout and have it go to console. This</em>) – option can print a progress bar, but won’t return the lines
as output.</li>
<li><strong>sudo_options</strong> (<em>string or list of strings that will be passed as options to sudo</em>)</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spython.utils.terminal.split_uri">
<code class="sig-prename descclassname"><span class="pre">spython.utils.terminal.</span></code><code class="sig-name descname"><span class="pre">split_uri</span></code><span class="sig-paren">(</span><em><span class="n"><span class="pre">container</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../modules/spython/utils/terminal.html#split_uri"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spython.utils.terminal.split_uri" title="Permalink to this definition"></a></dt>
<dd><p>Split the uri of a container into the protocol and image part</p>
<p>An empty protocol is returned if none found.
A trailing slash is removed from the image part.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spython.utils.terminal.stream_command">
<code class="sig-prename descclassname"><span class="pre">spython.utils.terminal.</span></code><code class="sig-name descname"><span class="pre">stream_command</span></code><span class="sig-paren">(</span><em><span class="n"><span class="pre">cmd</span></span></em>, <em><span class="n"><span class="pre">no_newline_regexp</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Progess'</span></span></em>, <em><span class="n"><span class="pre">sudo</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em><span class="n"><span class="pre">sudo_options</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em><span class="n"><span class="pre">output_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'stdout'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../modules/spython/utils/terminal.html#stream_command"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spython.utils.terminal.stream_command" title="Permalink to this definition"></a></dt>
<dd><p>stream a command (yield) back to the user, as each line is available.</p>
<p># Example usage:
results = []
for line in stream_command(cmd):</p>
<blockquote>
<div>print(line, end=”“)
results.append(line)</div></blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>cmd</strong> (<em>the command to send, should be a list for subprocess</em>)</li>
<li><strong>no_newline_regexp</strong> (<em>the regular expression to determine skipping a</em>) – newline. Defaults to finding Progress</li>
<li><strong>sudo_options</strong> (<em>string or list of strings that will be passed as options to sudo</em>)</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spython.utils.terminal.which">
<code class="sig-prename descclassname"><span class="pre">spython.utils.terminal.</span></code><code class="sig-name descname"><span class="pre">which</span></code><span class="sig-paren">(</span><em><span class="n"><span class="pre">software</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'singularity'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../modules/spython/utils/terminal.html#which"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spython.utils.terminal.which" title="Permalink to this definition"></a></dt>
<dd><p>which returns the full path to where software is installed.</p>
</dd></dl>

</div>
<div class="section" id="module-spython.utils">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-spython.utils" title="Permalink to this headline"></a></h2>
</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="spython.main.parse.html" class="btn btn-neutral float-left" title="spython.main.parse package" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../changelog.html" class="btn btn-neutral float-right" title="&lt;no title&gt;" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2017-2021, Vanessa Sochat.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>